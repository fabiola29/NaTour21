package com.example.natour2022.view.fragment;import android.os.Bundle;import androidx.annotation.NonNull;import androidx.fragment.app.Fragment;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageButton;import com.example.natour2022.adapter.AdapterListItinerary;import com.example.natour2022.R;import com.example.natour2022.model.Itinerary;import com.example.natour2022.presenter.fragment.Explore_presenter;import com.example.natour2022.view.activity.StartActivity;import com.google.firebase.database.DataSnapshot;import com.google.firebase.database.DatabaseError;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import com.google.firebase.database.ValueEventListener;import org.jetbrains.annotations.NotNull;import java.util.ArrayList;import java.util.List;public class Explore_fragment extends Fragment {    private final StartActivity startActivity;    private Explore_presenter explore_presenter;    private ImageButton buttonBackExplore;    RecyclerView recyclerView;    List<Itinerary> itineraryList;    AdapterListItinerary adapterListItinerary;    public Explore_fragment(StartActivity startActivity) {        this.startActivity = startActivity;    }    public StartActivity getStartActivity() {        return startActivity;    }    public View onCreateView(@NotNull LayoutInflater inflater,                             ViewGroup container,                             Bundle savedInstanceState) {        return inflater.inflate(R.layout.fragment_explore, container, false);    }    @Override    public void onViewCreated(@NonNull final View view, Bundle savedInstanceState) {        super.onViewCreated(view, savedInstanceState);        recyclerView = view.findViewById(R.id.ItineraryListRv);        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));        buttonBackExplore = view.findViewById(R.id.back_explore);        explore_presenter = new Explore_presenter(this);        listenToClickEvents();        getAllItinerary();    }    private void listenToClickEvents() {        buttonBackExplore.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {               explore_presenter.onButtonBackExploreClicked();            }        });    }    public void getAllItinerary(){        FirebaseDatabase database = FirebaseDatabase.getInstance();        DatabaseReference referenceDb = database.getReference("Itinerary");        itineraryList = new ArrayList<>();        itineraryList.clear();        referenceDb.addValueEventListener(new ValueEventListener() {            @Override            public void onDataChange(@NonNull DataSnapshot snapshot) {                Iterable<DataSnapshot> dataSnapsho1 = snapshot.getChildren();                for(DataSnapshot ds : dataSnapsho1) {                if(ds.child("titleItinerary").getValue() != null){                    Itinerary iter = new Itinerary(                                (String) ds.child("itineraryId").getValue(),                                (String) ds.child("titleItinerary").getValue(),                                (String) ds.child("descriptionItinerary").getValue(),                                (String) ds.child("difficultyLevel").getValue(),                                (String) ds.child("hours").getValue(),                                (String) ds.child("minutes").getValue(),                                (String) ds.child("seconds").getValue(),                                String.valueOf(ds.child("image").getValue()));                            iter.setItineraryId(ds.getKey());                            iter.setEmail((String)ds.child("email").getValue());                        itineraryList.add(iter);                    }                }                adapterListItinerary = new AdapterListItinerary(getActivity(), itineraryList);                recyclerView.setAdapter(adapterListItinerary);            }            @Override            public void onCancelled(@NonNull DatabaseError error) {            }        });    }}